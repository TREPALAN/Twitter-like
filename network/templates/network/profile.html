{% extends "network/layout.html" %}

{% block body %}
    <form acion="{% url 'create_profile' %}" method="post">
        {% csrf_token %}
        <div id="image_profile">
            <img id="image-preview" src="" alt="Preview Image">
        </div>
        <input type="file" id="image-upload" name="image" accept="image/*">
        <div class="form-floating">
            <textarea class="form-control" placeholder="bio" id="floatingTextarea2" style="height: 100px; width: 400px;"></textarea>
        </div>
        <br> 
        <button type="submit" class="btn btn-secondary">Submit</button>       
    </form>


    <script>
        const image = document.getElementById('image-preview');
    const input = document.getElementById('image-upload');
    
    input.addEventListener('change', function(e) {
        const file = e.target.files[0];
        const reader = new FileReader();

        reader.onload = function(event) {
            image.src = event.target.result;
            const cropper = new Cropper(image, {
                aspectRatio: 1, // Crop to a square shape
                viewMode: 1, // Restrict the crop box to the container
                minCropBoxWidth: 100, // Minimum width of the crop box
                minCropBoxHeight: 100, // Minimum height of the crop box
                responsive: true, // Enable responsive behavior
                // Additional options...
            });
        };

        reader.readAsDataURL(file);
    });
    </script>
{% endblock %}